<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WWF Study Guide 2026 â€” Sustainability Programs in Switzerland</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Montserrat',-apple-system,sans-serif;background:#f5f5f0;min-height:100vh;color:#333}
@keyframes fadeIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
@keyframes spin{to{transform:rotate(360deg)}}

.header{background:#2d4a27;padding:0}
.header-nav{max-width:1200px;margin:0 auto;padding:20px 32px;display:flex;align-items:center;gap:24px}
.logo-img{height:50px}
.nav-links{display:flex;gap:24px;margin-left:auto}
.nav-links a{color:rgba(255,255,255,.7);text-decoration:none;font-size:14px;font-weight:500;transition:color .2s}
.nav-links a:hover,.nav-links a.active{color:#fff}

.header-hero{background:#7d9b78;padding:48px 32px 52px}
.header-hero-inner{max-width:1200px;margin:0 auto}
.header-hero h1{font-size:clamp(28px,4vw,44px);font-weight:800;color:#fff;line-height:1.15;margin-bottom:12px}
.header-hero p{font-size:16px;color:rgba(255,255,255,.85);max-width:650px;line-height:1.6;font-weight:400}

.filters-wrap{max-width:1200px;margin:-24px auto 0;padding:0 24px;position:relative;z-index:10}
.filters-card{background:#fff;border-radius:8px;padding:24px 28px;box-shadow:0 2px 16px rgba(0,0,0,.06)}
.search-input{width:100%;padding:12px 16px;border:1px solid #ccc;border-radius:4px;font-size:15px;font-family:'Montserrat',sans-serif;outline:none;transition:border-color .2s;background:#fafafa;margin-bottom:20px}
.search-input:focus{border-color:#2d4a27;background:#fff}
.search-input::placeholder{color:#aaa}
.filters-row{display:flex;gap:14px;flex-wrap:wrap}
.filter-group{flex:1 1 180px;min-width:150px}
.filter-label{display:block;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:#2d4a27;margin-bottom:5px}
.filter-select{width:100%;padding:9px 12px;border:1px solid #ccc;border-radius:4px;font-size:13px;font-family:'Montserrat',sans-serif;background:#fff;color:#333;cursor:pointer;outline:none;transition:border-color .2s}
.filter-select:focus{border-color:#2d4a27}
.filter-actions{margin-top:14px;display:flex;align-items:center;gap:12px}
.filter-actions span{font-size:13px;color:#888}
.btn-clear{background:#2d4a27;border:none;border-radius:4px;padding:5px 14px;font-size:12px;color:#fff;cursor:pointer;font-family:'Montserrat',sans-serif;font-weight:600;transition:background .2s}
.btn-clear:hover{background:#2d4a29}

.results-wrap{max-width:1200px;margin:24px auto 0;padding:0 24px 60px}
.results-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:8px}
.results-count{font-size:14px;font-weight:600;color:#666}
.results-badges{display:flex;gap:6px;flex-wrap:wrap}
.badge{font-size:11px;padding:3px 10px;border-radius:3px;font-weight:600;white-space:nowrap}
.badge-bachelor{background:#6b8f5e;color:#fff}
.badge-minor{background:#8aaa7e;color:#fff}
.badge-master{background:#4a6e3f;color:#fff}
.badge-weiterbildung{background:#a0b89a;color:#333}

.programs-list{display:flex;flex-direction:column;gap:10px}

.program-card{background:#fff;border-radius:6px;border:1px solid #e0e0d8;overflow:hidden;transition:box-shadow .2s,transform .15s;cursor:pointer}
.program-card:hover{box-shadow:0 3px 12px rgba(0,0,0,.08);transform:translateY(-1px)}
.card-inner{padding:18px 22px}
.border-bachelor{border-left:4px solid #6b8f5e}
.border-minor{border-left:4px solid #8aaa7e}
.border-master{border-left:4px solid #4a6e3f}
.border-weiterbildung{border-left:4px solid #a0b89a}

.card-top{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap}
.card-main{flex:1;min-width:200px}
.card-title{margin:0 0 6px;font-size:15px;font-weight:700;color:#2a2a2a;line-height:1.35}
.card-uni-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.card-uni{font-size:13px;font-weight:600;color:#2d4a27}
.type-badge{font-size:10px;padding:2px 8px;border-radius:3px;font-weight:600}
.type-uni{background:#eee8f5;color:#6b4f8a}
.type-fh{background:#e5f0fa;color:#3a6d9e}
.card-tags{display:flex;gap:6px;flex-wrap:wrap;align-items:flex-start}
.tag-level{font-size:11px;font-weight:700;padding:3px 10px;border-radius:3px;white-space:nowrap}
.tag-lang{font-size:11px;font-weight:600;padding:3px 10px;border-radius:3px;background:#f0f0ea;color:#666;white-space:nowrap}
.card-discs{display:flex;gap:4px;margin-top:8px;flex-wrap:wrap}
.disc-tag{font-size:10px;font-weight:600;padding:2px 8px;border-radius:3px;background:#f0f4ee;color:#5a7d4f}

.card-details{margin-top:14px;padding-top:14px;border-top:1px solid #eee;animation:fadeIn .25s ease}
.card-desc{margin:0 0 10px;font-size:13px;line-height:1.65;color:#444}
.card-pract{background:#f8f8f4;border-radius:4px;padding:10px 14px;border:1px solid #e8e8e0}
.card-pract-lbl{font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.8px;color:#999}
.card-pract p{margin:4px 0 0;font-size:12px;color:#555;line-height:1.5}
.card-hint{text-align:right;margin-top:6px;font-size:11px;color:#bbb}

.empty{text-align:center;padding:60px 20px;color:#999}
.empty .ico{font-size:40px;margin-bottom:12px}
.empty h3{font-size:15px;font-weight:600;margin-bottom:6px}
.empty p{font-size:13px}

.loading{text-align:center;padding:80px 20px}
.loading .spinner{width:36px;height:36px;border:3px solid #e0e0d8;border-top-color:#2d4a27;border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 16px}
.loading p{font-size:14px;color:#2d4a27;font-weight:500}
.loading .sub{font-size:12px;color:#aaa;margin-top:4px}

.error-box{max-width:550px;margin:40px auto;padding:24px;background:#fff;border:1px solid #e0e0d8;border-radius:6px;text-align:center}
.error-box h3{color:#c0392b;margin-bottom:8px;font-size:16px}
.error-box p{font-size:13px;color:#666;line-height:1.6}
.error-box code{background:#f5f5f0;padding:2px 6px;border-radius:3px;font-size:11px}

.footer{background:#4a4a40;padding:20px 32px;text-align:center}
.footer p{font-size:12px;color:rgba(255,255,255,.45)}
.footer a{color:rgba(255,255,255,.65)}

@media(max-width:600px){
  .header-hero{padding:32px 20px 36px}
  .header-nav{padding:12px 20px}
  .nav-links{display:none}
  .filters-wrap,.results-wrap{padding:0 12px}
  .filters-card{padding:16px}
  .card-inner{padding:14px}
  .filter-group{flex:1 1 100%}
  .results-wrap{padding-bottom:40px}
}
</style>
</head>
<body>

<div class="header">
  <div class="header-nav">
    <img class="logo-img" src="https://static.wixstatic.com/media/e9061f_4ac00305344143a4a63c3c5f61bc17e7~mv2.png/v1/crop/x_49,y_125,w_362,h_223/fill/w_194,h_118,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/logo%20he-sustainability.png" alt="HE Sustainability">
    <div class="nav-links">
      <a href="https://www.he-sustainability.ch/">Home</a>
      <a href="#" class="active">Study Guide</a>
      <a href="https://www.he-sustainability.ch/about">About</a>
    </div>
  </div>
</div>

<div class="header-hero">
  <div class="header-hero-inner">
    <h1>Study Guide 2026</h1>
    <p>Sustainability-focused Bachelor, Master and Continuing Education Programs in Switzerland</p>
  </div>
</div>

<div class="filters-wrap">
  <div class="filters-card">
    <input type="text" id="search" class="search-input" placeholder="Search programs, universities, or topics...">
    <div class="filters-row">
      <div class="filter-group"><label class="filter-label">Level</label><select id="fLevel" class="filter-select"><option value="">All</option></select></div>
      <div class="filter-group"><label class="filter-label">Discipline</label><select id="fDisc" class="filter-select"><option value="">All</option></select></div>
      <div class="filter-group"><label class="filter-label">University</label><select id="fUni" class="filter-select"><option value="">All</option></select></div>
      <div class="filter-group"><label class="filter-label">University Type</label><select id="fType" class="filter-select"><option value="">All</option></select></div>
      <div class="filter-group"><label class="filter-label">Language</label><select id="fLang" class="filter-select"><option value="">All</option></select></div>
    </div>
    <div class="filter-actions" id="fActions" style="display:none">
      <span id="fCount"></span>
      <button class="btn-clear" onclick="clearAll()">Clear all</button>
    </div>
  </div>
</div>

<div class="results-wrap">
  <div class="results-bar">
    <span class="results-count" id="rCount"></span>
    <div class="results-badges" id="rBadges"></div>
  </div>
  <div class="programs-list" id="list">
    <div class="loading"><div class="spinner"></div><p>Loading programs...</p><p class="sub">Fetching data from Google Sheets</p></div>
  </div>
</div>

<div class="footer">
  <p>&copy; WWF Switzerland 2026 &middot; <a href="https://www.he-sustainability.ch/">he-sustainability.ch</a> &middot; This is a prototype</p>
</div>

<script>
var SHEET_ID = "1jDphHwfUVrKaNgQGu3QDaWhAfyXuEIi4KbrY4g_HwOs";

var DL = {Econ:"Economic Sciences",NatSci:"Natural & Environmental Sciences",SocSci:"Social Sciences",EngSci:"Engineering Sciences",ArtDes:"Arts & Design",ComSci:"Computer Science",EdProf:"Education & Pedagogy"};
var LS = {
  Bachelor:        {b:"badge-bachelor",c:"border-bachelor",bg:"#e8f0e5",fg:"#3a5e30"},
  "Bachelor Minor":{b:"badge-minor",c:"border-minor",bg:"#eef3ec",fg:"#4a6e3f"},
  Master:          {b:"badge-master",c:"border-master",bg:"#e5eee2",fg:"#2d5227"},
  Weiterbildung:   {b:"badge-weiterbildung",c:"border-weiterbildung",bg:"#f0efe8",fg:"#5a5a4a"}
};

var DATA = [];
var exp = {};

function $(id) { return document.getElementById(id); }

function fetchData() {
  var cb = 'handleGoogleData';
  window[cb] = function(response) {
    try {
      if (!response.table || !response.table.rows) { showError('No table data'); return; }

      var cols = [];
      for (var i = 0; i < response.table.cols.length; i++) {
        cols.push((response.table.cols[i].label || '').toLowerCase().trim());
      }
      console.log('Columns:', cols);

      var iP = -1, iU = -1, iT = -1, iL = -1, iD = -1, iG = -1, iDe = -1, iPr = -1;
      for (var j = 0; j < cols.length; j++) {
        if (cols[j].indexOf('program') >= 0) iP = j;
        else if (cols[j].indexOf('university') >= 0 && cols[j].indexOf('type') >= 0) iT = j;
        else if (cols[j].indexOf('university') >= 0) iU = j;
        else if (cols[j].indexOf('level') >= 0) iL = j;
        else if (cols[j].indexOf('discipline') >= 0 || cols[j].indexOf('main') >= 0) iD = j;
        else if (cols[j].indexOf('language') >= 0 || cols[j].indexOf('lang') >= 0) iG = j;
        else if (cols[j].indexOf('description') >= 0 || cols[j].indexOf('desc') >= 0) iDe = j;
        else if (cols[j].indexOf('practical') >= 0 || cols[j].indexOf('info') >= 0) iPr = j;
      }

      if (iP === -1) { iP=0; iU=1; iT=2; iL=3; iD=4; iG=5; iDe=6; iPr=7; }

      DATA = [];
      var rows = response.table.rows;
      for (var k = 0; k < rows.length; k++) {
        var r = rows[k];
        var prog = gv(r, iP);
        if (!prog || prog === 'Program') continue;
        DATA.push({n:prog, u:gv(r,iU), t:gv(r,iT), l:gv(r,iL), d:gv(r,iD), g:gv(r,iG), desc:gv(r,iDe), p:gv(r,iPr)});
      }

      if (DATA.length === 0) { showError('No programs found. Check column headers.'); return; }
      populateFilters();
      render();
    } catch(e) { showError(e.message); }
  };

  var s = document.createElement('script');
  s.src = 'https://docs.google.com/spreadsheets/d/' + SHEET_ID + '/gviz/tq?tqx=responseHandler:' + cb;
  s.onerror = function() { showError('Could not load Google Sheets script.'); };
  document.head.appendChild(s);
}

function gv(row, idx) {
  if (idx < 0 || !row.c || !row.c[idx]) return '';
  var v = row.c[idx].v;
  return v ? String(v).trim() : '';
}

function showError(msg) {
  $('list').innerHTML = '<div class="error-box"><h3>Error</h3><p>' + msg + '</p></div>';
}

function uniq(a) {
  var s = {}, r = [];
  for (var i = 0; i < a.length; i++) { var v = a[i]; if (v && !s[v]) { s[v] = 1; r.push(v); } }
  return r.sort();
}

function fill(id, opts) {
  var s = $(id);
  while (s.options.length > 1) s.remove(1);
  for (var i = 0; i < opts.length; i++) { var o = document.createElement('option'); o.value = opts[i]; o.textContent = opts[i]; s.appendChild(o); }
}

function splitTrim(str) {
  var parts = str.split(','), r = [];
  for (var i = 0; i < parts.length; i++) { var t = parts[i].trim(); if (t) r.push(t); }
  return r;
}

function populateFilters() {
  var levels=[], discs=[], unis=[], types=[], langs=[];
  for (var i = 0; i < DATA.length; i++) {
    var x = DATA[i];
    levels.push(x.l);
    unis.push(x.u);
    types.push(x.t);
    var dd = splitTrim(x.d); for (var j=0;j<dd.length;j++) discs.push(dd[j]);
    var ll = splitTrim(x.g); for (var j=0;j<ll.length;j++) langs.push(ll[j]);
  }
  fill('fLevel', uniq(levels));
  fill('fDisc', uniq(discs));
  fill('fUni', uniq(unis));
  fill('fType', uniq(types));
  fill('fLang', uniq(langs));
}

function getF() {
  return { level:$('fLevel').value, disc:$('fDisc').value, uni:$('fUni').value, type:$('fType').value, lang:$('fLang').value, q:$('search').value.toLowerCase() };
}

function doFilter() {
  var f = getF(), r = [];
  for (var i = 0; i < DATA.length; i++) {
    var x = DATA[i];
    if (f.level && x.l !== f.level) continue;
    if (f.disc && x.d.indexOf(f.disc) < 0) continue;
    if (f.uni && x.u !== f.uni) continue;
    if (f.type && x.t !== f.type) continue;
    if (f.lang && x.g.indexOf(f.lang) < 0) continue;
    if (f.q && x.n.toLowerCase().indexOf(f.q) < 0 && x.u.toLowerCase().indexOf(f.q) < 0 && x.desc.toLowerCase().indexOf(f.q) < 0) continue;
    r.push(x);
  }
  return r;
}

function esc(s) { var d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

function render() {
  var r = doFilter(), f = getF();
  var ac = 0;
  if (f.level) ac++; if (f.disc) ac++; if (f.uni) ac++; if (f.type) ac++; if (f.lang) ac++;
  var fa = $('fActions');
  if (ac > 0) { fa.style.display='flex'; $('fCount').textContent=ac+' filter'+(ac>1?'s':'')+' active'; }
  else fa.style.display='none';

  $('rCount').textContent = r.length + ' program' + (r.length!==1?'s':'') + ' found';

  var bh = '';
  var lvs = ['Bachelor','Bachelor Minor','Master','Weiterbildung'];
  for (var li = 0; li < lvs.length; li++) {
    var lv = lvs[li], st = LS[lv], cnt = 0;
    for (var ci = 0; ci < r.length; ci++) { if (r[ci].l === lv) cnt++; }
    if (cnt) bh += '<span class="badge '+st.b+'">'+lv+': '+cnt+'</span>';
  }
  $('rBadges').innerHTML = bh;

  if (!r.length) { $('list').innerHTML='<div class="empty"><div class="ico">ðŸŒ±</div><h3>No programs found</h3><p>Try adjusting your filters or search terms</p></div>'; return; }

  var html = '';
  for (var ri = 0; ri < r.length; ri++) {
    var x = r[ri], idx = DATA.indexOf(x);
    var s = LS[x.l] || LS.Bachelor;
    var o = !!exp[idx];
    var ds = splitTrim(x.d);
    var isUni = x.t.toLowerCase().indexOf('uni') >= 0;
    var tc = isUni ? 'type-uni' : 'type-fh';

    var dh = '';
    for (var di=0;di<ds.length;di++) dh+='<span class="disc-tag">'+esc(DL[ds[di]]||ds[di])+'</span>';

    var det = '';
    if (o) {
      det='<div class="card-details"><p class="card-desc">'+esc(x.desc)+'</p>';
      if (x.p) det+='<div class="card-pract"><span class="card-pract-lbl">Practical Information</span><p>'+esc(x.p)+'</p></div>';
      det+='</div>';
    }

    html+='<div class="program-card" onclick="tog('+idx+')"><div class="card-inner '+s.c+'">'
      +'<div class="card-top"><div class="card-main">'
      +'<h3 class="card-title">'+esc(x.n)+'</h3>'
      +'<div class="card-uni-row"><span class="card-uni">'+esc(x.u)+'</span><span class="type-badge '+tc+'">'+esc(x.t)+'</span></div>'
      +'</div><div class="card-tags">'
      +'<span class="tag-level" style="background:'+s.bg+';color:'+s.fg+'">'+esc(x.l)+'</span>'
      +'<span class="tag-lang">'+esc(x.g)+'</span>'
      +'</div></div>'
      +'<div class="card-discs">'+dh+'</div>'
      +det
      +'<div class="card-hint">'+(o?'&#9650; Click to collapse':'&#9660; Click for details')+'</div>'
      +'</div></div>';
  }
  $('list').innerHTML = html;
}

function tog(i) { exp[i] = !exp[i]; render(); }

function clearAll() {
  var ids = ['fLevel','fDisc','fUni','fType','fLang','search'];
  for (var i=0;i<ids.length;i++) $(ids[i]).value='';
  exp={}; render();
}

var selects = document.querySelectorAll('.filter-select');
for (var i=0;i<selects.length;i++) selects[i].addEventListener('change', render);
$('search').addEventListener('input', render);

fetchData();
</script>
</body>
</html>
